{
  "fileName": "SigmaCompiler.scala",
  "filePath": "sc/src/main/scala/sigmastate/lang/SigmaCompiler.scala",
  "url": "sigmastate-interpreterhttps://github.com/ScorexFoundation/sigmastate-interpreter/sc/src/main/scala/sigmastate/lang/SigmaCompiler.scala",
  "summary": "The `SigmaCompiler` class in the `sigmastate.lang` package is responsible for compiling ErgoScript source code into executable code. The class takes in a `CompilerSettings` object that specifies the network prefix, builder, and whether to lower method calls. The `SigmaCompiler` class has several methods that parse, typecheck, and compile ErgoScript code.\n\nThe `parse` method takes in a string of ErgoScript source code and returns an expression tree. The `typecheck` method takes in a `ScriptEnv` object and a parsed expression tree and assigns types to all sub-expressions. The `compile` method takes in a `ScriptEnv` object and a string of ErgoScript source code and returns a `CompilerResult` object that contains the compiled code, the compiled graph, and the expression tree obtained from the graph created by `GraphBuilding`. The `compileTyped` method takes in a `ScriptEnv` object and a typed expression and returns a `CompilerResult` object that contains the compiled code, the compiled graph, and the expression tree obtained from the graph created by `GraphBuilding`.\n\nThe `unlowerMethodCalls` method is used to lower MethodCall nodes to ErgoTree nodes. This is done when `lowerMethodCalls` is set to true in the `CompilerSettings` object. The method takes in an expression tree and returns a modified expression tree where MethodCall nodes have been replaced with ErgoTree nodes.\n\nThe `SigmaCompiler` class is used in the larger project to compile ErgoScript source code into executable code. It is used by other classes and methods in the project that need to execute ErgoScript code. For example, it may be used by a smart contract that needs to execute ErgoScript code to validate a transaction. \n\nExample usage:\n\n```\nval settings = CompilerSettings(NetworkPrefix.Testnet)\nval compiler = SigmaCompiler(settings)\nval env = ScriptEnv.Empty\nval code = \"HEIGHT > 1000\"\nval result = compiler.compile(env, code)\nval compiledCode = result.code\nval compiledGraph = result.compiledGraph\nval buildTree = result.buildTree\n```",
  "questions": "1. What is the purpose of the `SigmaCompiler` class?\n- The `SigmaCompiler` class is used to parse, typecheck, and compile ErgoScript source code, and to unlower method calls.\n\n2. What is the significance of the `CompilerSettings` case class?\n- The `CompilerSettings` case class contains settings for the `SigmaCompiler`, such as the network prefix, builder, and whether to lower method calls.\n\n3. What is the purpose of the `unlowerMethodCalls` method?\n- The `unlowerMethodCalls` method is used to convert lowered method calls back into their original form, such as converting a `MapCollection` node to a `MethodCall` node with the `MapMethod`."
}